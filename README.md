# TypeScript + React Tetris-Like Game

TypeScriptとReactを使用して構築されたテトリスライクなブロック落下パズルゲームです。

## 概要

このプロジェクトは、モダンなWeb技術を使用してクラシックなブロック落下パズルゲームの体験を提供するものです。プレイヤーは様々な形のブロック（テトロミノ）を操作し、水平なラインを完成させることでスコアを獲得します。ブロックの出現順序には7-bag Randomizerアルゴリズムを採用しています。

## 機能

-   7種類の標準的なテトロミノ（I, J, L, O, S, T, Z）
-   7-bag Randomizerによるブロック出現アルゴリズム
-   キーボード操作によるブロックの移動（左右）、回転（時計回り、反時計回り）
-   基本的なウォールキック（回転時の左右への自動調整）
-   ソフトドロップ（任意落下）とハードドロップ（即時接地）
-   ホールド機能（ブロックの一時保管と入れ替え、1ターン1回）
-   落下予測地点表示（ゴーストピース）
-   Nextブロックプレビュー（5個先まで表示）
-   スコア計算（ライン消去数とレベルに基づく）とレベル進行システム（10ライン毎）
-   ハードドロップボーナススコア
-   ゲームの一時停止/再開
-   ゲームオーバー検出とリスタート機能
-   4カラムレイアウト（ホールド | ゲームボード | Nextキュー | 情報パネル+操作）
-   レスポンシブデザイン（狭い画面では1カラムに変化）

## 技術スタック

-   **フロントエンド**: React (v18+) + TypeScript
-   **ビルドツール**: Vite
-   **状態管理**: React Hooks (`useReducer`, `useEffect`, `useState`, `useCallback`, `useMemo`)
-   **スタイリング**: CSS (CSS変数、CSS Grid を使用)

## インストールと実行

### 前提条件

-   Node.js (v18推奨)
-   npm (v9以上) または yarn

### インストール

```bash
# リポジトリをクローン (URLを実際の場所に変更してください)
# git clone [https://github.com/yourusername/tsttrs.git](https://github.com/yourusername/tsttrs.git)
# cd tsttrs

# 依存関係をインストール
npm install
# または
# yarn install
````

### 開発サーバーの起動

```bash
npm run dev
# または
# yarn dev
```

ブラウザで表示されたローカルホストのアドレス（通常は [http://localhost:5173](https://www.google.com/search?q=http://localhost:5173)）を開いてゲームをプレイできます。

### ビルド

```bash
npm run build
# または
# yarn build
```

ビルドされたファイルは `dist` ディレクトリに出力されます。

## 操作方法

  - **← / H / S**: ブロックを左に移動
  - **→ / L / G**: ブロックを右に移動
  - **↑ / F / J**: ブロックを時計回りに回転
  - **Z / K / D**: ブロックを反時計回りに回転
  - **↓ / N / V**: ブロックを素早く落下（ソフトドロップ）
  - **スペース**: ブロックを即時落下（ハードドロップ）
  - **C / M**: ブロックをホールド/入れ替え
  - **P**: ゲームの一時停止/再開
  - **R**: ゲームのリスタート

## プロジェクト構造

```
/src
├── components/
│   ├── BlockDisplay.tsx      # 汎用ブロック表示コンポーネント
│   ├── Controls.tsx          # 操作ボタンコンポーネント
│   ├── GameBoard.tsx         # ゲームボードコンポーネント
│   ├── HoldDisplay.tsx       # ホールド表示コンポーネント
│   ├── InfoPanel.tsx         # 情報パネルコンポーネント
│   └── NextQueueDisplay.tsx  # Nextキュー表示コンポーネント
├── hooks/
│   └── useGameLogic.ts       # ゲームロジックのカスタムフック
├── types.ts                  # 型定義
├── utils.ts                  # ユーティリティ関数、定数
├── App.css                   # アプリケーション固有スタイル
├── App.tsx                   # メインアプリケーションコンポーネント
├── index.css                 # グローバルスタイル
├── main.tsx                  # エントリーポイント
└── vite-env.d.ts           # Vite環境型定義
```

## 仕様書

詳細な仕様書は `.memory/specification.md` に記載されています。（または、必要に応じて場所を指定してください）

## 今後の拡張予定

  - ハイスコア保存機能（Local Storageなど）
  - 効果音（ブロック移動、回転、接地、ライン消去、ゲームオーバーなど）
  - T-Spinなどの高度なテクニック判定とスコアリング
  - より洗練されたWall Kick / SRS（Super Rotation System）の実装
  - 設定画面（キーコンフィグ、落下速度調整など）
  - モバイル対応強化（タッチ操作）

## ライセンス

MIT

## 謝辞

このプロジェクトは、クラシックなブロック落下パズルゲームにインスパイアされています。
